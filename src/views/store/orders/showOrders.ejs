    <%- include('../../partials/header.ejs') %> 

<head>
  <link rel="stylesheet" href="/css/store/orders.css">
</head>

<html>
<body>

    <div class="container-user">
        <h2>Mis Pedidos</h2>

        <div class="search-container">
            <input type="text" id="searchOrderInput" placeholder="Buscar pedidos..." class="input-search" />
            <i class="fa fa-search search-icon"></i>
        </div>
        
        <% if (orders.length === 0) { %>
            <div class="alert-info-user">
                No has realizado ningún pedido aún.
            </div>
            <a href="/" class="btn-user">Ir a la tienda</a>
        <% } else { %>
            <div class="list-group-user">
                <% orders.forEach(order => { %>
                    <a href="/api/order/orderDetails/<%= order.id %>" class="list-group-product"
                        data-order-id="<%= order.id %>" data-shipping="<%= order.shippingStatus || 'pendiente' %>">
                        <div class="d-flex-user w-100-user justify-content-user">
                            <h5 class="mb-1">Pedido #<%= order.id %></h5>
                            <div class="right-info-user">
                                <span class="badge-user 
                                    <%= order.shippingStatus === 'enviado' ? 'bg-info-user' :
                                        order.shippingStatus === 'entregado' ? 'bg-success-user' :
                                        order.shippingStatus === 'cancelado' ? 'bg-danger-user' :
                                        'bg-warning-user' %> ms-2">
                                    <%= order.shippingStatus ? order.shippingStatus.toUpperCase() : 'PENDIENTE' %>
                                </span>
                                <small class="text-muted-user"><%= new Date(order.creationDate).toLocaleDateString() %></small>
                            </div>
                        </div>
                        <p class="mb-1-user">
                            <span class="strong-details">Total:</span> $<%= Number(order.total).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, "," ) %>
                            <span class="badge-user <%= order.state === 'pagado' ? 'bg-success-user' : 'bg-warning-user' %> ms-2">
                                <%= order.state %>
                            </span>
                        </p>
                        <small class="text-muted-user">
                            <%= order.address %>, <%= order.shippingCityName %>
                        </small>
                    </a>
                <% }); %>
            </div>
        <% } %>
    </div>

    <%- include('../../partials/footer.ejs') %>
    
</body>

<script src="/js/utils/orderSearch.js"></script>

</html>