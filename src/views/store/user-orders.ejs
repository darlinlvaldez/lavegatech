<%- include('../partials/header.ejs') %>

<div class="container mt-4">
  <h2>Mis Pedidos</h2>
  
  <% if (orders.length === 0) { %>
    <div class="alert alert-info">
      No has realizado ningún pedido aún.
    </div>
    <a href="/" class="btn btn-primary">Ir a la tienda</a>
  <% } else { %>
    <div class="list-group">
      <% orders.forEach(order => { %>
        <a href="/user/orders/<%= order.id %>" class="list-group-item list-group-item-action">
          <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">Pedido #<%= order.id %></h5>
            <small class="text-muted"><%= new Date(order.fecha_creacion).toLocaleDateString() %></small>
          </div>
          <p class="mb-1">
            <strong>Total:</strong> $<%= Number(order.total).toFixed(2) %>
            <span class="badge bg-<%= order.status === 'pagado' ? 'success' : 'warning' %> ms-2">
              <%= order.status %>
            </span>
          </p>
          <small class="text-muted">
            <%= order.direccion %>, <%= order.ciudad %>
          </small>
        </a>
      <% }); %>
    </div>
  <% } %>
</div>

<%- include('../partials/footer.ejs') %>