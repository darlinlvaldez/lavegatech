<%- include('../../components/header.ejs') %>

<body>

<div class="register-container">
  <h2>Crear cuenta</h2>

  <form action="/api/auth/register" method="POST">
    <label>Nombre de usuario:</label>
    <input type="text" name="username" value="<%= username || '' %>" 
    placeholder="Introducir nombre de usuario" data-error-input
    class="<%= validationErrors?.username ? 'input-error' : '' %>">
    
    <% if (validationErrors?.username) { %>
      <p class="error-text field-error visible" data-error-for="username">
        <i class="fa-solid fa-circle-exclamation"></i>
      <%= validationErrors.username %></p>
    <% } %>

    <label>Correo electrónico:</label>
    <input type="email" name="email" value="<%= email || '' %>" placeholder="ejemplo@gmail.com" 
    data-error-input class="<%= validationErrors?.email ? 'input-error' : '' %>">
    
    <% if (validationErrors?.email) { %>
      <p class="error-text field-error visible" data-error-for="email">
        <i class="fa-solid fa-circle-exclamation"></i>
      <%= validationErrors.email %></p>
    <% } %>
    
    <label>Contraseña:</label>
    <div class="password-wrapper">
      <input type="password" name="password" id="passwordInput" placeholder="Introducir contraseña" 
      data-error-input class="password-input <%= validationErrors?.password ? 'input-error' : '' %>">
  
    <span onclick="togglePassword('password')" class="toggle-password">
      <i id="eyeIconPassword" class="fas fa-eye-slash"></i>
    </span>
  </div>
      
  <% if (validationErrors?.password) { %>
    <p class="error-text field-error visible" data-error-for="password">
      <i class="fa-solid fa-circle-exclamation"></i>
    <%= validationErrors.password %></p>
  <% } %>

  <label>Confirmar contraseña:</label>
  <div class="password-wrapper">
    <input type="password" name="confirmPassword" id="confirmPasswordInput" placeholder="Repetir contraseña" 
    data-error-input class="password-input <%= validationErrors?.confirmPassword ? 'input-error' : '' %>">

    <span onclick="togglePassword('confirm')" class="toggle-password">
      <i id="eyeIconConfirmPassword" class="fas fa-eye-slash"></i>
    </span>
  </div>

  <% if (validationErrors?.confirmPassword) { %>
    <p class="error-text field-error visible" data-error-for="confirmPassword">
      <i class="fa-solid fa-circle-exclamation"></i>
    <%= validationErrors.confirmPassword %></p>
  <% } %>

  <% if (error && !validationErrors) { %>
    <p class="general-error"><%= error %></p>
  <% } %>

  <button type="submit">Registrarse</button>
</form>

  <div class="links">
    <p>¿Ya tienes una cuenta? <a href="/login">Inicia sesión</a></p>
  </div>
</div>  

<%- include('../../components/footer.ejs') %>